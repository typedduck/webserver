# Server for a static website

This is a simple server for serving static websites. It is designed to be easily
used in a container environment. The server does not support TLS, this should be
done with a reverse proxy.

A typical usage is to serve a static website from the `public` directory
generated by a static website generator.

Since the server is implemented using axum, it is suitable for use in a high
concurrency environment. It can handle a heavy load of requests without
performance issues.

The following environment variables are used:

- `WEBSERVER_DIR`: The directory to serve, defaulting to "public"
- `WEBSERVER_404`: The file to serve for 404 errors. The file must be located in
    `WEBSERVER_DIR` and the path is prepended. Defaults to "404.html"
- `WEBSERVER_ADDR`: The address to listen on, defaulting to "0.0.0.0"
- `WEBSERVER_PORT`: The port to listen on, defaulting to "8080"
- `WEBSERVER_TIMEOUT`: The timeout for requests in milliseconds, defaulting to
    "0", which means no timeout

If compiled with the "metrics" feature, the following environment variables are
used:

- `METRICS_ADDR`: The address to listen on for metrics, defaulting to "0.0.0.0"
- `METRICS_PORT`: The port to listen on for metrics, defaulting to "8081"

The path the metrics are served at is "/metrics". This should not be accessable
from the public internet. The metrics are compatible with Prometheus.

The provided Dockerfile can be used to build the image. It defines a base image
of "scratch" and uses the "x86_64-unknown-linux-musl" target to build a static
self-contained binary. This may be replaced by the build argument `TARGET` and
`IMAGE` to use a different base image and target.

The provided Dockerfile also defines the build argument `FEATURES` which can be
used to build with additional features. By default no features are enabled.
